(this.webpackJsonpspaceinvaders=this.webpackJsonpspaceinvaders||[]).push([[0],{19:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(13),s=n.n(a),o=(n(18),n(19),n(2)),i=n(0);function u(e){var t=e.padRef;e.onRightClick,e.onLeftClick,e.onMouseOver;return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("div",{ref:t,className:"padControl",id:"padControl"})})}var l=n(8),f=n(6),b=n(9),j=n(7);function d(e){var t=e.padRef,n=e.setLasers,c=(e.score,e.setScore),a=e.lasersOnScreen,s=e.invaders,o=Object(r.useRef)(null);Object(r.useEffect)((function(){var e=setInterval(p,10);return function(){return clearInterval(e)}}),[a]);var u=function(e){"Space"===e.code&&(console.log("spaceBar"),v())};Object(r.useEffect)((function(){return window.addEventListener("keyup",u),function(){window.removeEventListener("keyup",u)}}));var d=function(e){Object(b.a)(n,e);var t=Object(j.a)(n);function n(e){var r;Object(f.a)(this,n),(r=t.call(this,e)).bottom=90,r.left=parseInt(e,10)+30,r.visual=document.createElement("div");var c=r.visual;return c.classList.add("laser"),c.style.left=r.left+"px",c.style.bottom=r.bottom+"px",o.current.appendChild(c),r}return n}(r.Component),p=function(){a.forEach((function(e){var t=e.visual.style;e.bottom+=3,t.bottom=e.bottom+"px",s.forEach((function(t){var n=s.indexOf(t),r=a.indexOf(e),o=t.left,i=t.bottom,u=e.left,l=e.bottom;u>o-1&&u<o+30&&l>i-5&&l<i+20&&(t.visual.classList.remove("alien"),s.splice(n,1),e.visual.classList.remove("laser"),a.splice(r,1),c((function(e){return e+1})))})),e.bottom>593&&(a[0].visual.classList.remove("laser"),a.splice(0,1))}))},v=function(){var e=new d(t.current.style.left);n((function(t){return[].concat(Object(l.a)(t),[e])}))};return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("div",{ref:o,children:" "})})}function p(e){var t,n=e.setAlienSpeed,c=e.alienSpeed,a=e.invaders,s=e.isGameOver,u=e.setGameOver,d=e.setInvaders,p=Object(r.useState)(!1),v=Object(o.a)(p,2),O=v[0],m=v[1],h=Object(r.useRef)(),y=Object(r.useRef)(0),x=Object(r.useState)(!0),E=Object(o.a)(x,2),S=E[0],g=E[1],w=function(e){Object(b.a)(n,e);var t=Object(j.a)(n);function n(e,r){var c;Object(f.a)(this,n),(c=t.call(this,e)).bottom=500,c.left=e,c.visual=document.createElement("div");var a=c.visual;return a.classList.add(r),a.style.left=c.left+"px",a.style.bottom=c.bottom+"px",h.current.appendChild(a),c}return n}(r.Component),k=function(e,t,n){d((function(){return a=[]}));for(var r=300-(15*t+e*(t-1))/2,c=function(t){var c=new w(r+t*(15+e),n);d((function(e){return[].concat(Object(l.a)(e),[c])}))},s=0;s<t;s++)c(s)};Object(r.useEffect)((function(){s||k(40,7,"alien"),n((function(e){return e-1}))}),[O]);var L=function(){y.current++,y.current>20&&(g((function(e){return!e})),y.current=0),0===a.length&&m((function(e){return!e})),a.forEach((function(e){var t=e.visual.style;e.bottom-=1,S?e.left-=1:e.left+=1,t.bottom=e.bottom+"px",t.left=e.left+"px",e.bottom<30&&(e.visual.classList.remove("alien"),a.splice(a.indexOf(e),1),0===a.length&&(u(!0),n((function(){return 25}))))}))};return Object(r.useEffect)((function(){return s||(t=setInterval(L,c)),function(){return clearInterval(t)}}),[k]),Object(i.jsx)("div",{ref:h,children:s&&Object(i.jsx)("h1",{className:"gameTitle gameOver ",children:"GAME OVER !!!"})})}function v(e){var t=e.score;return Object(i.jsxs)("div",{id:"score",className:"scoreTitle mt-2",children:["SCORE : ",t]})}function O(){var e=Object(r.useRef)(),t=Object(r.useState)([]),n=Object(o.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)(!1),u=Object(o.a)(s,2),d=u[0],p=u[1],v=Object(r.useRef)(),O=function(t){Object(b.a)(r,t);var n=Object(j.a)(r);function r(t){var c;Object(f.a)(this,r),(c=n.call(this,t)).bottom=-10,c.left=Math.floor(600*Math.random()),c.visual=document.createElement("div");var a=c.visual;return a.classList.add("star"),a.style.left=c.left+"px",a.style.bottom=c.bottom+"px",e.current.appendChild(a),c}return r}(r.Component),m=function(e){for(var t=function(e){var t=new O;a((function(e){return[].concat(Object(l.a)(e),[t])}))},n=0;n<e;n++)t()},h=function(){p((function(e){return!e}))};Object(r.useEffect)((function(){m(1)}),[d]),Object(r.useEffect)((function(){var e=setInterval(h,120);return function(){return clearInterval(e)}}),[]);var y=function(){c.forEach((function(e){var t=e.visual.style;e.bottom-=2,t.bottom=e.bottom+"px",e.bottom<-600&&(e.visual.classList.remove("star"),c.splice(c.indexOf(e),1))}))};return Object(r.useEffect)((function(){return v.current=setInterval(y,10),function(){return clearInterval(v.current)}}),[m]),Object(i.jsx)("div",{ref:e})}var m=n(3),h=n.n(m),y=n(5);function x(e){var t=e.onSubmit,n=e.score,c=(e.deletePlayer,e.setScore),a=e.setGameOver,s=e.players,u=e.fetchPlayers,l=Object(r.useState)(!1),f=Object(o.a)(l,2),b=f[0],j=f[1],d=function(){var e=Object(y.a)(h.a.mark((function e(r){var c,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.preventDefault(),c=r.target,(a=Object.fromEntries(new FormData(c))).score=n,function(){var e=Object(y.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(a);case 3:u(),n=setInterval((function(){j((function(){return!0})),clearInterval(n)}),100),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.jsx)(i.Fragment,{children:b?Object(i.jsx)("div",{children:Object(i.jsx)(g,{players:s,handleClick:function(){c((function(){return 0})),a((function(){return!1}))}})}):Object(i.jsxs)("form",{className:"player",onSubmit:d,children:[Object(i.jsx)("label",{className:"name",htmlFor:"player",children:"ENTER YOUR NAME  :"}),Object(i.jsx)("br",{}),Object(i.jsx)("input",{type:"text",className:"playerInput",name:"name"}),Object(i.jsx)("br",{}),Object(i.jsx)("button",{className:"sendButton mt-2",htmltype:"submit",children:" SEND"})]})})}var E,S,g=function(e){var t=e.players,n=e.handleClick;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{class:"table",children:[Object(i.jsx)("h2",{children:"hall of fame"}),Object(i.jsx)("ul",{children:t.map((function(e){return Object(i.jsxs)("li",{children:[Object(i.jsx)("span",{children:e.name}),Object(i.jsx)("span",{className:"scored",children:e.score})]})}))}),Object(i.jsx)("button",{className:"btn btn-outline-danger btn-sm mt-2",onClick:n,children:"PLAY AGAIN"})]})})},w=n(4),k=function e(t){Object(f.a)(this,e),this.errors=t};function L(e){return R.apply(this,arguments)}function R(){return(R=Object(y.a)(h.a.mark((function e(t){var n,r,c,a=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},null===(n=Object(w.a)({headers:{Accept:"application/json"}},n)).body||"object"!==typeof n.body||n.body instanceof FormData||(n.body=JSON.stringify(n.body),n.headers["Content-Type"]="application/json"),e.next=5,fetch("http://localhost:8080"+t,n);case 5:if(204!==(r=e.sent).status){e.next=9;break}return console.log("ok 204"),e.abrupt("return",null);case 9:return e.next=11,r.json();case 11:if(c=e.sent,!r.ok){e.next=17;break}return console.log("oke response data"),e.abrupt("return",c);case 17:if(!c.errors){e.next=19;break}throw new k(c.errors);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t){switch(t.type){case"FETCHING_PLAYERS":return Object(w.a)({},e);case"SET_PLAYERS":case"ADD_PLAYER":return Object(w.a)(Object(w.a)({},e),{},{players:t.payload});case"DELETE_PLAYER":return Object(w.a)(Object(w.a)({},e),{},{players:e.players.filter((function(e){return e!==t.payload}))})}}var A=!1,C=!1;function P(){var e=Object(r.useRef)(null),t=Object(r.useRef)(0),n=Object(r.useState)([]),c=Object(o.a)(n,2),a=c[0],s=c[1],l=Object(r.useState)([]),f=Object(o.a)(l,2),b=f[0],j=f[1],m=Object(r.useState)(0),g=Object(o.a)(m,2),w=g[0],k=g[1],R=Object(r.useState)(!1),P=Object(o.a)(R,2),N=P[0],F=P[1],T=function(){var e=Object(r.useReducer)(I,{players:null}),t=Object(o.a)(e,2),n=t[0],c=t[1];return{players:n.players,addPlayer:function(){var e=Object(y.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L("/players",{method:"post",body:t});case 2:n=e.sent,c({type:"ADD_PLAYER",payload:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fetchPlayers:function(){var e=Object(y.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L("/players");case 2:t=e.sent,console.log("players",t),c({type:"FETCHING_PLAYERS"}),c({type:"SET_PLAYERS",payload:t});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),deletePlayer:function(){var e=Object(y.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L("/players/"+t._id,{method:"DELETE"});case 2:c({type:"DELETE_PLAYER",payload:t});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}(),D=T.players,G=T.fetchPlayers,Y=T.deletePlayer,_=T.addPlayer,M=Object(r.useState)(20),B=Object(o.a)(M,2),J=B[0],H=B[1];Object(r.useEffect)((function(){q()}),[]),Object(r.useEffect)((function(){G()}),[]);var U=function(e){"ArrowLeft"===e.key?z():"ArrowRight"===e.key?(console.log("going right with key"),q()):"ArrowUp"===e.key&&V()};Object(r.useEffect)((function(){return console.log("add event listener for key control"),window.addEventListener("keyup",U),function(){window.removeEventListener("keyup",U)}}),[]);var V=function(){clearInterval(E),clearInterval(S),A=!1,C=!1},q=function(){C=!1,clearInterval(S),A||(E=setInterval((function(){A=!0,t.current+=2,e.current.style.left=t.current+"px",parseInt(e.current.style.left,10)>534&&V()}),10))},z=function(){A=!1,clearInterval(E),C||(S=setInterval((function(){C=!0,t.current-=2,e.current.style.left=t.current+"px",parseInt(e.current.style.left,10)<=0&&V()}),10))};return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(v,{score:w}),Object(i.jsx)("div",{children:N?Object(i.jsx)(x,{onSubmit:_,deletePlayer:Y,setScore:k,score:w,setGameOver:F,players:D,fetchPlayers:G}):null}),Object(i.jsx)("div",{children:Object(i.jsx)(p,{alienSpeed:J,setAlienSpeed:H,padRef:e,invaders:b,setInvaders:j,isGameOver:N,setGameOver:F})}),Object(i.jsx)("div",{id:"pad",children:Object(i.jsx)(d,{padRef:e,setScore:k,score:w,invaders:b,setLasers:s,lasersOnScreen:a})}),Object(i.jsx)("div",{id:"pad",children:Object(i.jsx)(u,{padRef:e,onRightClick:q,onLeftClick:z,onMouseOver:function(){V()}})}),Object(i.jsx)("div",{className:"animatedBackground",children:Object(i.jsx)(O,{})})]})}var N=function(){return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h2",{className:"gameTitle",children:"-----SPACE INVADERS-----"}),Object(i.jsx)("div",{className:"mainGame",children:Object(i.jsx)(P,{})})]})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,23)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))};s.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(N,{})}),document.getElementById("root")),F()}},[[22,1,2]]]);
//# sourceMappingURL=main.c86845c6.chunk.js.map