{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\regol\\\\Documents\\\\REACT\\\\INVADERS\\\\Invaders-monorepo\\\\packages\\\\spaceinvaders\\\\src\\\\gameElements\\\\Aliens.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { Component, useEffect, useRef } from 'react';\nimport { useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function InvadersContainer({\n  setAlienSpeed,\n  alienSpeed,\n  invaders,\n  isGameOver,\n  setGameOver,\n  setInvaders\n}) {\n  _s();\n\n  const [newSetOfAliens, setAliens] = useState(false); // const[isGameOver, setGameOver] = useState(false)\n  // const newSetOfAliens = useRef(true)\n\n  const alienRef = useRef();\n  let timing;\n  let count = useRef(0);\n  const [direction, setDirection] = useState(true);\n\n  const toggleSetOfAliens = function () {\n    setAliens(newSetOfAliens => !newSetOfAliens);\n  };\n\n  const toggleDirection = function () {\n    setDirection(direction => !direction);\n  };\n\n  class aliens extends Component {\n    constructor(left, alienType) {\n      super(left);\n      this.bottom = 500;\n      this.left = left;\n      this.visual = document.createElement(\"div\");\n      const visual = this.visual;\n      visual.classList.add(alienType);\n      visual.style.left = this.left + 'px';\n      visual.style.bottom = this.bottom + 'px';\n      const alienDiv = alienRef.current;\n      alienDiv.appendChild(visual);\n    }\n\n  }\n\n  const createAliens = function (space, numAliens, alienType) {\n    // clearInterval(timing)\n    setInvaders(() => invaders = []);\n    let startPosition = 300 - (numAliens * 15 + space * (numAliens - 1)) / 2;\n\n    for (let i = 0; i < numAliens; i++) {\n      let position = startPosition + i * (15 + space);\n      let newInvader = new aliens(position, alienType);\n      setInvaders(invaders => [...invaders, newInvader]);\n    }\n  };\n\n  useEffect(() => {\n    if (!isGameOver) {\n      createAliens(40, 7, 'alien'); // createAliens(50,3,'alien')\n    }\n\n    setAlienSpeed(speed => speed - 1);\n  }, [newSetOfAliens]);\n\n  const moveAliens = function () {\n    count.current++;\n\n    if (count.current > 20) {\n      toggleDirection();\n      count.current = 0;\n    }\n\n    if (invaders.length === 0) {\n      toggleSetOfAliens();\n    }\n\n    invaders.forEach(invader => {\n      let visual = invader.visual.style;\n      invader.bottom -= 1;\n      direction ? invader.left -= 1 : invader.left += 1;\n      visual.bottom = invader.bottom + 'px';\n      visual.left = invader.left + 'px';\n\n      if (invader.bottom < 30) {\n        invader.visual.classList.remove('alien');\n        invaders.splice(invaders.indexOf(invader), 1);\n\n        if (invaders.length === 0) {\n          setGameOver(true);\n          setAlienSpeed(() => 25);\n        }\n      }\n    });\n  };\n\n  useEffect(() => {\n    if (!isGameOver) {\n      timing = setInterval(moveAliens, alienSpeed);\n    }\n\n    return () => clearInterval(timing);\n  }, [createAliens]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: alienRef,\n    children: isGameOver && /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"gameTitle gameOver \",\n      children: \"GAME OVER !!!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 24\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 12\n  }, this);\n}\n\n_s(InvadersContainer, \"IZfXi7JWPhpD02yCvmlRohJ4oPI=\");\n\n_c = InvadersContainer;\n\nvar _c;\n\n$RefreshReg$(_c, \"InvadersContainer\");","map":{"version":3,"sources":["C:/Users/regol/Documents/REACT/INVADERS/Invaders-monorepo/packages/spaceinvaders/src/gameElements/Aliens.jsx"],"names":["React","Component","useEffect","useRef","useState","InvadersContainer","setAlienSpeed","alienSpeed","invaders","isGameOver","setGameOver","setInvaders","newSetOfAliens","setAliens","alienRef","timing","count","direction","setDirection","toggleSetOfAliens","toggleDirection","aliens","constructor","left","alienType","bottom","visual","document","createElement","classList","add","style","alienDiv","current","appendChild","createAliens","space","numAliens","startPosition","i","position","newInvader","speed","moveAliens","length","forEach","invader","remove","splice","indexOf","setInterval","clearInterval"],"mappings":"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","sourcesContent":["import React, { Component, useEffect, useRef} from'react'\r\nimport {useState} from 'react'\r\n\r\nexport function InvadersContainer ({ setAlienSpeed, alienSpeed, invaders, isGameOver,setGameOver, setInvaders}){\r\n    const [newSetOfAliens, setAliens] = useState (false)\r\n    // const[isGameOver, setGameOver] = useState(false)\r\n    // const newSetOfAliens = useRef(true)\r\n    const alienRef = useRef()\r\n    let timing\r\n    let count = useRef(0)\r\n    const [direction, setDirection] = useState(true)\r\n    \r\n    const toggleSetOfAliens = function (){\r\n        setAliens(newSetOfAliens => !newSetOfAliens)\r\n\r\n    }\r\n    const toggleDirection = function () {\r\n        setDirection(direction => !direction)\r\n      }\r\n    \r\n    \r\n\r\n\r\n    class aliens extends Component{\r\n\r\n        constructor (left, alienType){\r\n            super(left)\r\n            this.bottom = 500\r\n            this.left = left\r\n            this.visual = document.createElement(\"div\")\r\n            const visual = this.visual\r\n            visual.classList.add(alienType)\r\n            visual.style.left = this.left + 'px'\r\n            visual.style.bottom = this.bottom + 'px'\r\n            \r\n            const alienDiv = alienRef.current\r\n            alienDiv.appendChild(visual)            \r\n        }\r\n    }\r\n\r\n    const createAliens = function(space,numAliens, alienType){\r\n       \r\n        // clearInterval(timing)\r\n            setInvaders(()=> invaders=[])\r\n            let startPosition = 300 - (((numAliens*15) + (space*(numAliens-1))))/2\r\n        for (let i=0; i<numAliens;i++){\r\n            \r\n            let position = startPosition + i*(15+space)\r\n            let newInvader = new aliens(position, alienType)\r\n            setInvaders(invaders => [...invaders, newInvader])            \r\n        }\r\n    }\r\n\r\n    useEffect(()=>{\r\n        if (!isGameOver){\r\n            createAliens(40,7,'alien') \r\n            // createAliens(50,3,'alien')\r\n        }\r\n        setAlienSpeed(speed=> speed -1)\r\n\r\n    },[newSetOfAliens])\r\n\r\n\r\n    const moveAliens =  function(){\r\n        count.current++\r\n        if (count.current > 20){\r\n            toggleDirection()\r\n            count.current = 0\r\n        }\r\n        if(invaders.length === 0){\r\n            toggleSetOfAliens()\r\n        }\r\n        invaders.forEach(invader => {\r\n            let visual = invader.visual.style\r\n            invader.bottom -= 1\r\n            direction ? invader.left -= 1 : invader.left += 1\r\n            visual.bottom = invader.bottom + 'px'\r\n            visual.left = invader.left + 'px'\r\n\r\n            if(invader.bottom <30){\r\n                invader.visual.classList.remove('alien')\r\n                invaders.splice(invaders.indexOf(invader),1)\r\n                if(invaders.length === 0){\r\n                    setGameOver(true)\r\n                    setAlienSpeed(()=>25)\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    useEffect(()=>{\r\n        if (!isGameOver){timing = setInterval(moveAliens, alienSpeed);}        \r\n        return () => clearInterval(timing);\r\n    },[createAliens])\r\n\r\n\r\n    return <div ref={alienRef}>\r\n        {isGameOver && <h1 className='gameTitle gameOver '>GAME OVER !!!</h1> }\r\n        {/* <button  onClick={createAliens}>c</button> */}\r\n    </div>\r\n}"]},"metadata":{},"sourceType":"module"}